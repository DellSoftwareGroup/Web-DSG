if(typeof RootPath=="undefined"){RootPath="/"}var populateListingPending=false,entriesPerType={"0":6,"1":12,"2":16,"3":16},endPointURL=(((RootPath=="/")?"":RootPath)+"/jsonreq/video/").replace("//","/"),page=1,rowContainer=$(".listing-entries").find(".row"),hashMap={video_type:"",product:"byproduct",solution:"bysolution",brand:"bybrand"};if($.fn.multipleSelect){init()}else{if($("html").hasClass("ie8")){$("<link/>",{rel:"stylesheet",href:"/static/library/css/multiple-select.css"}).appendTo("head")}$.getScript("/static/library/jQuery/jquery.multiple.select.js",function(){$.fn.multipleSelect.defaults.onOpen=function(c){var a=$(c).next(),b=a.find("ul");if(b.outerHeight()<b.prop("scrollHeight")&&!b.data("width-fixed")){b.css("width",b.outerWidth()+$.position.scrollbarWidth());b.data("width-fixed",true)}a.css("right","auto");if(a.offset().left+a.find("ul").outerWidth(true)>$("body").width()){a.css("right",0)}else{a.css("right","auto")}};init()})}function init(){var b=[],d={solution:{data:{type:"video solution"},init:true,callback:function(f,e){if(typeof $(this).data("multipleSelect")=="object"){$(this).next().find("ul").remove();$(this).multipleSelect("refresh");$(this).multipleSelect("setSelects",[e])}else{$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:getLocalizedContent("LabelAllSolutions"),multiple:false,selectAll:false,single:true,onClick:function(g){if(g.value!=""){$("#product").multipleSelect("setSelects",[])}}});$(this).multipleSelect("uncheckAll")}}},brand:{data:{type:"video product line"},init:true,callback:function(e){$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:getLocalizedContent("LabelAllProductLines"),multiple:false,selectAll:false,single:true,onClick:function(f){var g={brand:f.value};$.each(["product","solution"],function(k,h){b.push(c(h,$.extend({},d[h].data,g),d[h].callback))})}});$(this).multipleSelect("uncheckAll")}},product:{data:{type:"video product"},init:true,callback:function(f,e){if(typeof $(this).data("multipleSelect")=="object"){$(this).next().find("ul").remove();$(this).multipleSelect("refresh");$(this).multipleSelect("setSelects",[e])}else{$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:getLocalizedContent("LabelAllProducts"),multiple:false,selectAll:false,single:true,onClick:function(g){if(g.value!=""){$("#solution").multipleSelect("setSelects",[])}}});$(this).multipleSelect("uncheckAll")}}},video_type:{data:{type:"video type"},init:true,callback:function(f,e){if(typeof $(this).data("multipleSelect")=="object"){$(this).next().find("ul").remove();$(this).multipleSelect("refresh");$(this).multipleSelect("setSelects",[e])}else{$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:f,minimumCountSelected:0,countSelected:getLocalizedContent("LabelVideoTypes")+"&nbsp;(#)",selectAllText:getLocalizedContent("LabelAllVideoTypes"),allSelected:getLocalizedContent("LabelAllVideoTypes")});$(this).multipleSelect("checkAll")}}}};$(document).ready(function(){var e=null,f=$(".filters");getLocalizedContent(["EventLabelDuration","LabelAllProducts","LabelAllProductLines","LabelAllSolutions","LabelVideoTypes","LabelAllVideoTypes"]).done(function(){$.each(d,function(h,g){if(g.init){b.push(c(h,g.data,g.callback))}});$.when.apply(this,b).done(function(){if(location.hash.length){a()}f.data("continue",true).on("change","select",function(){if(f.data("continue")&&e===null){e=setInterval(function(){clearInterval(e);setTimeout(function(){e=null},100);if(b.length){$.when(b).done(function(){populateListing();b=[]})}else{populateListing()}},100)}setFilterNum()});b=[];setFilterNum();populateListing()}).fail(function(){console.log("Failed")})});$("body").on("click",".resetfilter",function(g){g.preventDefault();f.data("continue",false);f.find("select").each(function(){if($(this).next().is(":visible")){if($(this).attr("id")=="video_type"){$(this).multipleSelect("checkAll")}else{$(this).multipleSelect("uncheckAll")}}});$.each(["product","solution"],function(k,h){b.push(c(h,d[h].data,d[h].callback))});$.when(b).done(function(){b=[];f.data("continue",true);populateListing(true)})});$("#view-more").on("click",function(h){h.preventDefault();$(this).addClass("hidden");var g=window.scrollY||$("html").scrollTop();populateListing(false).done(function(){window.scrollTo(0,g)});window.scrollTo(0,g)})});function a(){var g=location.hash.substr(1),e=g.split("_");$.each(hashMap,function(h,j){var i=new RegExp("^"+j,"i");$.each(e,function(m,k){if(i.test(k)){var l=$("#"+h),n=k.replace(i,"");f(l,n);return false}})});function f(h,j){if(h.multipleSelect("getSelects")!=h.val()){var i="";h.find("option").each(function(){if($(this).text().replace(/[\s\W]/g,"").toLowerCase()==j){h.multipleSelect("setSelects",[$(this).val()]);i=$(this).val();return false}});if(h.attr("id")=="brand"&&i!=""){$.each(["product","solution"],function(l,k){c(k,$.extend({},d[k].data,{brand:i}),d[k].callback)})}}}}function c(i,f,h){var e=$("#"+i),g=e.val();e.empty();return $.ajax({url:endPointURL,type:"POST",dataType:"JSON",data:f}).done(function(j){if(i!="video_type"){e.append('<option value="">'+j.title+"</option>")}$.each(j.data,function(k,l){if(l.englishname){e.append('<option value="'+l.id+'" data-name="'+l.englishname+'">'+l.value+"</option>")}else{if(l.englishvalue){e.append('<option value="'+l.id+'" data-name="'+l.englishvalue+'">'+l.value+"</option>")}else{e.append('<option value="'+l.id+'">'+l.value+"</option>")}}});if(typeof h=="function"){h.call(e,j.title,g)}})}}addResize(function(){populateListing(true)});function populateListing(a){if(typeof a=="undefined"){a=true}if(populateListingPending){return false}buildAHashTag();var c=getDataSet(!a),b=$("#view-more");if(c===false){rowContainer.empty();$("#no-results").removeClass("hidden");b.addClass("hidden");return false}populateListingPending=true;return $.ajax({url:endPointURL,type:"POST",dataType:"JSON",data:c,beforeSend:function(){$("#ui-loader").show()}}).done(function(d){populateListingPending=false;$("#ui-loader").hide();if(a){rowContainer.empty()}$.each(d.data,function(e,g){var f='<div class="col-md-3 col-sm-4 col-xs-12" style="display: none;"> <a href="'+g.URL+'">  <div class="img-border">    <img class="img-responsive center-block" src="http://stage.software.dell.com'+g.ImageURL2+'" alt="" onerror="this.style.display=\'none\';" /> 		 <div class="img-overlay vertical-center horizontal-center"><div><span class="icon-ui-play-underlay"></span><span class="icon-ui-play"></span></div></div>  </div>  <h4 class="text-blue dotdotdot" data-max-line="3">'+g.DisplayName+" </h4> ";if(g.Desc!=null){f+='<p class="teaser dotdotdot" data-max-line="5"> '+g.Desc+" </p>"}if(g.Duration!=""){f+="<p>"+getLocalizedContent("EventLabelDuration")+": "+g.Duration+"</p>"}f+="</a>";f+="</div>";rowContainer.append(f);if((pageType>=2&&((e+1)%4==0)&&e!=0)||(pageType==1&&((e+1)%3==0)&&e!=0)){rowContainer.append('<div class="clearfix">')}});setTimeout(function(){processFlex()},500);if(d.total){$("#no-results").addClass("hidden");if(d.total>entriesPerType[pageType]*page){b.removeClass("hidden")}else{b.addClass("hidden")}}else{$("#no-results").removeClass("hidden");b.addClass("hidden")}$(".total_results").html(d.total);setTimeout(function(){rowContainer.find("> div").filter(":not(:visible)").show().css("opacity",0).animate({opacity:1},500,function(){processEllipsis(this)})},100)})}function buildAHashTag(){var a=[],c=window.scrollY||$("html").scrollTop();$.each(hashMap,function(g,e){var d=$("#"+g),f=d.multipleSelect("getSelects");if(g=="video_type"){if(f.length==1){d.find("option").each(function(){if($(this).attr("value")==f[0]){a.push($.trim($(this).data("name")||$(this).text()).toLowerCase().replace(/[\s\W]/g,""));return false}})}}else{d.find("option").each(function(){if($(this).attr("value")==f[0]){a.push(e+$.trim($(this).data("name")||$(this).text()).toLowerCase().replace(/[\s\W]/g,""));return false}})}});if(a.length){var b=a.join("_");location.hash=(b=="")?" ":b}else{location.hash=" "}window.scrollTo(0,c)}function getLanguageCode(){var a=53;if(typeof RootPath=="string"){switch(RootPath){case"/br-pt/":a=139;break;case"/mx-es/":a=156;break;case"/cn-zh/":a=202;break;case"/jp-ja/":a=109;break;case"/fr-fr/":a=75;break;case"/de-de/":a=86;break}}return a}function getDataSet(c){page=c?++page:1;var d={type:"video list",page:page,pagesize:entriesPerType[pageType]},b={videoType:"video_type",product:"product",solution:"solution",brand:"brand"},a=false;$.each(b,function(e,g){var f=$("#"+g).val();if(g=="video_type"){if(f===null||f===undefined){a=true;return false}d[e]=f.join(",")}else{d[e]=f}});return a?false:d}function setFilterNum(){var a=0;$(".filters").find("select").each(function(){if(($(this).is(":visible")||pageType==0)&&$(this).data("multipleSelect")!==undefined){var b=$(this).multipleSelect("getSelects");if(b.length==1){if(b[0]!=""){a++}}else{a+=b.length}}});$(".filter-num").text(a)};
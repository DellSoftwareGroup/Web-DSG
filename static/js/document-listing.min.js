var populateListingPending=false,entriesPerType={"0":6,"1":12,"2":16,"3":16},endPointURL=(((RootPath=="/")?"":RootPath)+"/jsonreq/document/").replace("//","/"),page=1,rowContainer=$(".listing-entries").find(".row"),hashMap={content_type:"",product:"byproduct",solution:"bysolution",brand:"bybrand",language:"bylang"};if($.fn.multipleSelect){init()}else{if($("html").hasClass("ie8")){$("<link/>",{rel:"stylesheet",href:"/static/library/css/multiple-select.css"}).appendTo("head")}$.getScript("/static/library/jQuery/jquery.multiple.select.js",function(){$.fn.multipleSelect.defaults.onOpen=function(c){var a=$(c).next(),b=a.find("ul");if(b.outerHeight()<b.prop("scrollHeight")&&!b.data("width-fixed")){b.css("width",b.outerWidth()+$.position.scrollbarWidth());b.data("width-fixed",true)}a.css("right","auto");if(a.offset().left+a.find("ul").outerWidth(true)>$("body").width()){a.css("right",0)}else{a.css("right","auto")}};init()})}if(typeof RootPath=="undefined"){RootPath="/"}function init(){var b=[],e={country:{data:{type:"document country"},init:true,callback:function(f){$(this).prev().text(f);$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:f,multiple:false,selectAll:false,single:true});$(this).multipleSelect("uncheckAll")}},content_type:{data:{type:"document type"},init:true,callback:function(f){$(this).prev().text(getLocalizedContent("LabelDocumentType"));$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:getLocalizedContent("LabelDocumentType"),minimumCountSelected:0,countSelected:getLocalizedContent("LabelDocumentType")+"&nbsp;(#)",selectAllText:getLocalizedContent("LabelAllDocumentTypes"),allSelected:getLocalizedContent("LabelAllDocumentTypes"),onClose:function(){if(!$("#content_type").multipleSelect("getSelects").length){$("#content_type").multipleSelect("setSelects",[$("#content_type").find("option:eq(0)").attr("value")])}else{caseStudyFilter()}}});$(this).multipleSelect("checkAll")}},brand:{data:{type:"document product line"},init:true,callback:function(f){$(this).prev().text(f);$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:f,multiple:false,selectAll:false,single:true,onClick:function(g){var h={brand:g.value};$.each(["product","solution"],function(l,k){b.push(c(k,$.extend({},e[k].data,h),e[k].callback))})}});$(this).multipleSelect("uncheckAll")}},product:{data:{type:"document product"},init:true,callback:function(g,f){if(typeof $(this).data("multipleSelect")=="object"){$(this).next().find("ul").remove();$(this).multipleSelect("refresh");$(this).multipleSelect("setSelects",[f])}else{$(this).prev().text(g);$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:g,multiple:false,selectAll:false,single:true,onClick:function(h){if(h.value!=""){$("#solution").multipleSelect("setSelects",[])}}});$(this).multipleSelect("uncheckAll")}}},solution:{data:{type:"document solution"},init:true,callback:function(g,f){if(typeof $(this).data("multipleSelect")=="object"){$(this).next().find("ul").remove();$(this).multipleSelect("refresh");$(this).multipleSelect("setSelects",[f])}else{$(this).prev().text(g);$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:g,multiple:false,selectAll:false,single:true,onClick:function(h){if(h.value!=""){$("#product").multipleSelect("setSelects",[])}}});$(this).multipleSelect("uncheckAll")}}},language:{data:{type:"document language"},init:true,callback:function(f){$(this).prev().text(f);$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:f,multiple:false,selectAll:false,single:true});$(this).multipleSelect("setSelects",[getLanguageCode()])}},industry:{data:{type:"document industry"},init:true,callback:function(f){if(typeof $(this).data("multipleSelect")=="object"){$(this).next().find("ul").remove();$(this).multipleSelect("refresh")}else{$(this).prev().text(f);$(this).parent().removeClass("hidden");$(this).multipleSelect({placeholder:f,multiple:false,selectAll:false,single:true});$(this).multipleSelect("uncheckAll")}}}},d={};$(document).ready(function(){var f=null,g=$(".filters");getLocalizedContent(["DocumentLabelUpdated","EventLabelAllDates","LabelAllIndustries","LabelAllProducts","LabelAllProductLines","LabelAllSolutions","LabelAllLanguages","LabelAllCountries","LabelDocumentType","LabelAllDocumentTypes"]).done(function(){$.each(e,function(i,h){if(h.init){b.push(c(i,h.data,h.callback))}});d={event_date:getLocalizedContent("EventLabelAllDates"),product:getLocalizedContent("LabelAllProducts"),brand:getLocalizedContent("LabelAllProductLines"),solution:getLocalizedContent("LabelAllSolutions"),language:getLocalizedContent("LabelAllLanguages"),country:getLocalizedContent("LabelAllCountries"),industry:getLocalizedContent("LabelAllIndustries")};$.when.apply(this,b).done(function(){if(location.hash.length){a()}g.data("continue",true).on("change","select",function(){if(g.data("continue")&&f===null){f=setInterval(function(){clearInterval(f);setTimeout(function(){f=null},100);if(b.length){$.when(b).done(function(){populateListing();b=[]})}else{populateListing()}},100)}setFilterNum()});b=[];setFilterNum();populateListing()}).fail(function(){console.log("Failed")})});$("body").on("click",".resetfilter",function(h){h.preventDefault();g.data("continue",false);g.find("select").each(function(){if($(this).next().is(":visible")){if($(this).attr("id")=="content_type"){$(this).multipleSelect("checkAll")}else{if($(this).attr("id")=="language"){$(this).multipleSelect("setSelects",[getLanguageCode()])}else{$(this).multipleSelect("uncheckAll")}}}else{$(this).parent().show();$(this).multipleSelect("uncheckAll")}});$.each(["product","solution"],function(l,k){b.push(c(k,e[k].data,e[k].callback))});$.when(b).done(function(){b=[];g.data("continue",true);populateListing(true)})});$("#view-more").on("click",function(i){i.preventDefault();$(this).addClass("hidden");var h=window.scrollY||$("html").scrollTop();populateListing(false).done(function(){window.scrollTo(0,h)});window.scrollTo(0,h)})});function a(){var h=location.hash.substr(1),f=h.split("_");$.each(hashMap,function(i,k){var j=new RegExp("^"+k,"i");$.each(f,function(n,l){if(j.test(l)){var m=$("#"+i),o=l.replace(j,"");g(m,o);return false}})});function g(j,l){if(j.multipleSelect("getSelects")!=j.val()||j.attr("id")=="language"){var k="";if(j.attr("id")=="language"&&l.length>1){var i=setLanguageCode(l);j.multipleSelect("setSelects",[i])}j.find("option").each(function(){if($(this).text().replace(/[\s\W]/g,"").toLowerCase()==l){j.multipleSelect("setSelects",[$(this).val()]);k=$(this).val();return false}});if(j.attr("id")=="brand"&&k!=""){$.each(["product","solution"],function(n,m){c(m,$.extend({},e[m].data,{brand:k}),e[m].callback)})}}}}function c(j,g,i){var f=$("#"+j),h=f.val();f.empty();return $.ajax({url:endPointURL,type:"POST",dataType:"JSON",data:g}).done(function(k){if(j!="content_type"){k.title=d[j];f.append('<option value="">'+k.title+"</option>")}$.each(k.data,function(l,m){if(m.englishname){f.append('<option value="'+m.id+'" data-name="'+m.englishname+'">'+m.value+"</option>")}else{if(m.englishvalue){f.append('<option value="'+m.id+'" data-name="'+m.englishvalue+'">'+m.value+"</option>")}else{f.append('<option value="'+m.id+'">'+m.value+"</option>")}}});if(typeof i=="function"){i.call(f,k.title,h)}})}}addResize(function(){populateListing(true)});function populateListing(a){if(typeof a=="undefined"){a=true}if(populateListingPending){return false}buildAHashTag();var c=getDataSet(!a),b=$("#view-more");if(c===false){rowContainer.empty();$("#no-results").removeClass("hidden");b.addClass("hidden");return false}populateListingPending=true;return $.ajax({url:endPointURL,type:"POST",dataType:"JSON",data:c,beforeSend:function(){$("#ui-loader").show()}}).done(function(d){populateListingPending=false;$("#ui-loader").hide();if(a){rowContainer.empty()}$.each(d.data,function(e,g){var f='<div class="col-md-3 col-sm-4 col-xs-12" style="display: none;"> <a href="'+g.url+'">  <div class="border-grey img-crop">    <img class="img-responsive center-block" src="'+g.imageurl+'" alt="">   </div>   <h4 class="text-blue dotdotdot" data-max-line="3">'+g.documenttype+": "+g.title+" </h4> ";if(g.description!=null){f+='<p class="teaser dotdotdot" data-max-line="5"> '+$("<div>"+g.description+"</div>").text()+" </p>"}if(g.date!=""){f+="<p>"+getLocalizedContent("DocumentLabelUpdated")+": "+g.date+"</p>"}f+="</a></div>";rowContainer.append(f);if((pageType>=2&&((e+1)%4==0)&&e!=0)||(pageType==1&&((e+1)%3==0)&&e!=0)){rowContainer.append('<div class="clearfix">')}});if(d.total){$("#no-results").addClass("hidden");if(d.total>entriesPerType[pageType]*page){b.removeClass("hidden")}else{b.addClass("hidden")}}else{$("#no-results").removeClass("hidden");b.addClass("hidden")}$(".total_results").html(d.total);setTimeout(function(){rowContainer.find("> div").filter(":not(:visible)").show().css("opacity",0).animate({opacity:1},500,function(){processEllipsis(this)})},100)})}function buildAHashTag(){var a=[],c=window.scrollY||$("html").scrollTop();$.each(hashMap,function(g,e){var d=$("#"+g),f=d.multipleSelect("getSelects");if(g=="content_type"){if(f.length==1){d.find("option").each(function(){if($(this).attr("value")==f[0]){a.push($.trim($(this).data("name")||$(this).text()).toLowerCase().replace(/[\s\W]/g,""));return false}})}}else{if(g!="language"||(g=="language"&&parseInt(f[0])!=getLanguageCode())){d.find("option").each(function(){if($(this).attr("value")==f[0]){a.push(e+$.trim($(this).data("name")||$(this).text()).toLowerCase().replace(/[\s\W]/g,""));return false}})}}});if(a.length){var b=a.join("_");location.hash=(b=="")?" ":b}else{location.hash=" "}window.scrollTo(0,c)}function getLanguageCode(){var a=53;if(typeof RootPath=="string"){switch(RootPath){case"/br-pt/":a=139;break;case"/mx-es/":a=156;break;case"/cn-zh/":a=202;break;case"/jp-ja/":a=109;break;case"/fr-fr/":a=75;break;case"/de-de/":a=86;break}}return a}function setLanguageCode(a){var b=53;switch(a){case"portuguese":b=139;break;case"spanish":b=156;break;case"chinese":b=202;break;case"japanese":b=109;break;case"french":b=75;break;case"german":b=86;break;case"dutch":b=50;break;case"italian":b=106;break}return b}function getDataSet(c){page=c?++page:1;var d={type:"document list",page:page,pagesize:entriesPerType[pageType]},b={documenttypes:"content_type",product:"product",solution:"solution",brand:"brand",language:"language",country:"country",state:"state_province",industry:"industry"},a=false;$.each(b,function(e,g){var f=$("#"+g).val();if(g=="content_type"){if(f===null||f===undefined){a=true;return false}d[e]=f.join(",")}else{d[e]=f}});return a?false:d}function caseStudyFilter(){if($.inArray("167",$("#content_type").multipleSelect("getSelects"))>-1){$("#country").parent().show();$("#industry").parent().show()}else{$("#country").parent().hide();$("#industry").parent().hide()}}function setFilterNum(){var a=0;$(".filters").find("select").each(function(){if(($(this).is(":visible")||pageType==0)&&$(this).data("multipleSelect")!==undefined){var b=$(this).multipleSelect("getSelects");if(b.length==1){if(b[0]!=""){a++}}else{a+=b.length}}});$(".filter-num").text(a)};
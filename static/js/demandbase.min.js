function DemandBaseInitialize(i,d,e,h,c,j){var b=false,g={emailID:"dumbEmail",companyID:e,key:"96b804f998aaf4409cf333efdb2a3b3c",toggleFieldList:h,autocompletePlaceholder:"",getToggleElement:function(k){return this.djq("#tr_"+k)},priorityMap:{domain:2,ip:1,company:3},fieldMap:{company_name:"HiddenCompany",demandbase_sid:"",revenue_range:"",employee_range:"NumberOfEmployees",street_address:"Address1",city:"City",state:"State",zip:"PostalCode",country:"Country",country_name:"",data_source:"",watch_list_account_status:"",longitude:"DB_Longitude",latitude:"DB_Latitude",industry:"DB_Industry",sub_industry:"DB_SubIndustry"}};$(i).find(":visible:input").each(function(){if($.inArray($(this).attr("type"),["button","submit","checkbox"])==-1){$(this).val("")}});$("#"+e).on($("html").hasClass("ie8")?"propertychange":"input",function(){if($(i).data("isFrmOpen")==undefined){if($(this).val().length>=2){testAutocompleteWidget(i,e)}}});window.dbAsyncInit=function(){if(typeof c=="undefined"){c={}}Demandbase.Connectors.WebForm.connect($.extend({},g,c));if(typeof j=="function"){j.apply(this)}};if(siteTags.DemandBaseUp!="false"){if($("#chklicense").length){$("#chklicense").trigger("change")}else{$(i).find("[type=submit]").prop("disabled",true)}(function(){var l=document.createElement("script");l.type="text/javascript";l.async=true;l.id="demandbase-form";l.onload=function(){var m=$().jquery.split(".");if(m[0]==1&&m[1]<9){$.noConflict()}Demandbase.jQuery.ajaxSetup({beforeSend:function(){var p=this.url,n=/demandbase\.com\/autocomplete\?callback/g,o=p.match(n);if(o!==null){startAjaxCallTracker(i,e)}}})};l.onerror=function(){PopulateDBFieldsWebFormConnector({},i,e)};l.src=("https:"==document.location.protocol?"https://":"http://")+"scripts.demandbase.com/formWidget.js";var k=document.getElementsByTagName("script")[0];k.parentNode.insertBefore(l,k);alreadyPickUpDemanBase=false})()}else{if($("#chklicense").length){$("#chklicense").trigger("change")}else{$(i).find("[type=submit]").prop("disabled",false)}}db_hook_init=function(){var k=setInterval(function(){if($("#demandbase-company-autocomplete-widget").find("> ul").length){clearInterval(k);DemandBaseOnComplete(i,d,e,h)}},10)};db_hook_after_parse=function(l,k){b=true;PopulateDBFieldsWebFormConnector(l,i,k,a)};db_hook_before_parse=function(l,k){if(k=="ip"||k=="domain"){Demandbase.Connectors.WebForm.CompanyProfile=null;return false}if(!b){f(l);PopulateDBFieldsWebFormConnector(l,i,k,a);$("form").find("div[firstscreen=0]").show()}};function f(m){var l=g.fieldMap,k=["country","street_address","city","state","zip","latitude","longitude","industry","sub_industry"];if(!$.isEmptyObject(m)){k.forEach(function(n){$val=m[n];$id=l[n];$("#"+$id).val($val)})}}function a(){$.each(h,function(k,l){if($("#"+l).is(":visible")){toggleSubmitButton(d,true);return false}})}}function DemandBaseOnComplete(e,d,f,c){var b=setInterval(function(){if(Demandbase.CompanyAutocomplete.initialized){clearInterval(b);a()}},100);function a(){var g=Demandbase.jQuery(Demandbase.CompanyAutocomplete.textField),k=false,i=$("#demandbase-company-autocomplete-widget");g.attr("autocomplete",/Chrome/.test(navigator.userAgent)?false:"off");Demandbase.jQuery.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth(true)+6)};g.data("selected",false).data("mouseenter",false).data("key13_9clicked",false).data("destroyed",false).on("keydown",function(m){if(g.data("selected")){return true}if((m.keyCode==13||m.keyCode==9)){g.data("key13_9clicked",true);dbDataSet="";PopulateDBFieldsWebFormConnector({},e,f);g.autocomplete("close");j.css("display","none");for(var l in c){$("#tr_"+c[l]).show()}if($("#chklicense").length){$("#chklicense").trigger("change")}else{$(e).find("[type=submit]").prop("disabled",false)}}}).on("blur",function(){var l=this;setTimeout(function(){if(!g.data("destroyed")){if($(l).val()!=""&&!g.data("selected")&&!g.data("mouseenter")&&!i.find("> ul").is(":visible")&&!g.data("key13_9clicked")){PopulateDBFieldsWebFormConnector({},e,f);if($("#chklicense").length){$("#chklicense").trigger("change")}else{$(e).find("[type=submit]").prop("disabled",false)}}}},200)}).autocomplete({position:{my:"right top",at:"right bottom",offset:"0 0",collision:"flip"}});var j=$('<div class="dbwrapper"><div>Select your company<div>Don\'t see your company? <a href="#" id="use-input-value">Close List &gt;</a></div></div></div>').appendTo("body"),h=i.find("> ul:last-child");$("#demandbase-autocomplete").css("zIndex",998);$("#use-input-value").on("click",function(l){l.preventDefault();l.stopPropagation();dbDataSet="";g.data("destroyed",true).autocomplete("destroy");j.css("display","none");PopulateDBFieldsWebFormConnector({},e,f);if($("#chklicense").length){$("#chklicense").trigger("change")}else{$(e).find("[type=submit]").prop("disabled",false)}setTimeout(function(){g.parents("form").find(":input:visible").each(function(m){if($(this).css("background-color")=="rgb(248, 254, 190)"){$(this).css("background-color","transparent")}})},200)});g.bind("autocompletesearch",function(l,m){if($(".ie8").length>0){if(!k){ie8UnbindTrigger(f);startAjaxCallTracker(e,f);k=true}}}).bind("autocompleteselect",function(){g.data("selected",true)}).bind("autocompleteopen",function(){companyOpen=true;if($(e).data("isFrmOpen")){return}if(g.data("key13_9clicked")){g.data("key13_9clicked",false).autocomplete("close");return false}g.data("selected",false);var m=h.outerWidth(true),l={top:g.offset().top+g.outerHeight(false),left:g.offset().left-(m-g.outerWidth(true))};if(m<243){m=243;h.css("width",243)}h.show().parent().show().end().css({top:l.top+24,left:l.left+1});j.css({top:l.top,left:($("body").hasClass("off-canvas-mode")?document.body.clientWidth:0)+l.left,width:m+2,height:h.outerHeight(true)+24+24,display:"block",zIndex:h.css("zIndex")-1});if($("body").hasClass("off-canvas-mode")){h.css("left",parseInt(h.css("left"))+document.body.clientWidth)}}).bind("autocompleteclose",function(){j.css("display","none")});if(Demandbase.jQuery(Demandbase.CompanyAutocomplete.textField).val()!=""){Demandbase.jQuery(Demandbase.CompanyAutocomplete.textField).autocomplete("search")}}}function testAutocompleteWidget(a,b){if($("#demandbase-company-autocomplete-widget").find("> ul").length>0){ie8UnbindTrigger(b);return true}setTimeout(function(){if(!$("#demandbase-company-autocomplete-widget").find("> ul").length>0){PopulateDBFieldsWebFormConnector({},a,b);$(a).find("[type=submit]").prop("disabled",false);ie8UnbindTrigger(b);document.getElementById(b).focus();$(a).data("isFrmOpen","true")}},1500)}function startAjaxCallTracker(a,b){if(companyOpen===false){setTimeout(function(){if(companyOpen===false){$("#"+b).removeClass("ui-autocomplete-loading");PopulateDBFieldsWebFormConnector({},a,b);var c=Demandbase.jQuery(Demandbase.CompanyAutocomplete.textField);c.autocomplete("destroy");$(a).find("[type=submit]").prop("disabled",false);$(a).data("isFrmOpen","true")}},1800)}}function ie8UnbindTrigger(a){if($(".ie8").length>0){$("#"+a).unbind("propertychange")}};

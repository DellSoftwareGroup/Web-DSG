var languageList=[],videoList=[];function OOCreate(a){videoList.push({target:a.elementId,MBID:a.mb.MbId,MB:a.mb,captions:[]});a.mb.subscribe(OO.EVENTS.FULLSCREEN_CHANGED,"UITeam",function(){if($(".oo_fullscreen").hasClass("oo_fullscreen_off")){$(".wrapper").css({width:"100%",height:"100%"});$(".round-corners").css("overflow","visible");$(".ooyalaplayer .plugins").hide();disableHoverToggle($(".ooyalaplayer .plugins"))}else{if($(".oo_fullscreen").hasClass("oo_fullscreen_on")){$(".wrapper").css("width","967px");$(".round-corners").css("overflow","hidden");enableHoverToggle($(".ooyalaplayer .plugins"))}}});a.mb.subscribe(OO.EVENTS.INITIAL_PLAY,"UITeam",function(){jQuery.ajax({url:"/sso/VideoIDSet",data:{videoid:ooyala_player_handle.currentItem.embed_code},contentType:"application/json; charset=utf-8"})});a.mb.subscribe(OO.EVENTS.PLAYBACK_READY,"UITeam",function(){var b=this.mb.MbId,c=null,e=null;$.each(videoList,function(f,g){if(g.MBID==b){c=$("#"+g.target).find(".plugins");e=g;return false}});var d=a.getTitle();addPlayerControls(c,a);c.css("display","").append('<div class="player-toolbar"><p>'+d+'</p><ul><li class="info"><span></span></li><li class="email"><span></span></li><li class="share"><span></span></li><li class="embed"><span></span></li></ul></div>');enableHoverToggle(c);c.show().delay(1000).fadeOut();c.find(".player-toolbar ul li").on("click",function(){disableHoverToggle(c);var f=$(this).attr("class"),g=$('<div class="overlay"><div></div></div>');c.find(".player-toolbar > p").hide();c.find(".player-toolbar ul li span").removeClass("active");a.pause();if(c.parents(".innerWrapper").find(".overlay").length==0){g.appendTo(c.parents(".innerWrapper"))}c.parents(".innerWrapper").find(".oo_promo div.oo_start_button").hide();c.find(".player-toolbar ul").show();c.removeClass("show").show().css("background","none");c.parents(".innerWrapper").find(".overlay > div").empty();c.find(".player-toolbar").find("."+f+" span").addClass("active");appendOverlayContent(c,f,a)});$("body").on("click",".oo-toolbar a",function(j){var h=$(this).parent(),i=h.attr("class"),f="",g=$("h1").text().trim()+" | Dell Software";if(h.hasClass("facebook")){if(typeof s=="object"){s.events="event13";s.eVar18="Facebook";s.linkTrackVars="events,eVar18";s.linkTrackEvents="event13";s.tl(true,"o","Social Media")}j.preventDefault();window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(burl)+"&t="+encodeURIComponent(g),"facebook","width=480,height=240,toolbar=0,status=0,resizable=1")}else{if(h.hasClass("twitter")){if(typeof s=="object"){s.events="event13";s.eVar18="Twitter";s.linkTrackVars="events,eVar18";s.linkTrackEvents="event13";s.tl(true,"o","Social Media")}j.preventDefault();window.open("http://twitter.com/share?via=DellSoftware&url="+encodeURIComponent(burl)+"&text="+encodeURIComponent(g)+",%20&counturl="+encodeURIComponent(f),"twitter","width=480,height=380,toolbar=0,status=0,resizable=1")}else{if(h.hasClass("linkedin")){if(typeof s=="object"){s.events="event13";s.eVar18="LinkedIn";s.linkTrackVars="events,eVar18";s.linkTrackEvents="event13";s.tl(true,"o","Social Media")}j.preventDefault();window.open("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(burl)+"&title="+encodeURIComponent(g),"linkedin","width=480,height=360,toolbar=0,status=0,resizable=1")}else{if(h.hasClass("googleshare")){if(typeof s=="object"){s.events="event13";s.eVar18="Google+";s.linkTrackVars="events,eVar18";s.linkTrackEvents="event13";s.tl(true,"o","Social Media")}j.preventDefault();window.open("https://plus.google.com/share?url="+encodeURIComponent(location.href),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")}}}}});processClosedCaption(a,e);$(".oo_controls").each(function(){if($(this).hasClass("oo_mini_controls")){$(this).removeClass("oo_mini_controls").addClass("oo_full_controls")}})})}function getTime(c){var c=c.split(":"),a=parseInt(c[0],10),b=parseInt(c[1],10),d=parseInt(c[2],10);return((a*3600)+(b*60)+d)}function onPlayheadTimeChanged(e,c,f){var a="";for(var b in f.captions){var b=f.captions[b];if(e>b.begin&&e<=b.end){a=b;break}}var d=c.find(".captionsContainer");if(a&&(a!="")){d.css("opacity","1");c.find(".caption")[0].innerHTML=a.text;if(a.text.replace(" ","")==""){d.css("opacity","0")}}else{d.css("opacity","0")}if(lastCaption!=a){d.css("width","100%");if(a!=""){resizeCaptions()}}lastCaption=a}function mapLanguageCodes(a){switch(a.toLowerCase()){case"da":return"Dansk";case"de":return"Deutsch";case"en":return"English";case"en-us":return"English (US)";case"en-uk":return"English (UK)";case"es":return"Espa&#65533;ol";case"fr":return"Fran&#65533;ais";case"hi":return"&#2361;&#2367;&#2344;&#2381;&#2342;&#2368;";case"it":return"Italiano";case"ja":return"&#26085;&#26412;&#35486;";case"ko":return"&#51312;&#49440;&#47568;, &#54620;&#44397;&#50612;";case"nl":return"Nederlands";case"pt":case"pt-pt":return"Portugu&#65533;s";case"pt-br":return"Portugu&#65533;s (Brasil)";case"zh-hans":return"&#31616;&#20307;&#20013;&#25991;";case"zh-hant":return"&#32321;&#39636;&#20013;&#25991;";case"ar":return"Arabic";case"cs":return"Czech";case"el":return"Greek";case"fi":return"Finnish";case"fr-ca":return"Fran&#65533;ais (Canada)";case"he":return"Hebrew";case"hu":return"Hungarian";case"no":return"Norweigan";case"pl":return"Polish";case"ro":return"Romanian";case"ru":return"Russian";case"sv":return"Swedish";case"tr":return"Turkish"}}function appendOverlayContent(b,a,c){if(b.parents(".innerWrapper").find(".overlay > div").is(":empty")){b.parents(".innerWrapper").find(".overlay > div").append('<div class="info"><p>'+c.getTitle()+"</p><p>"+c.getCurrentItemDescription()+'</p><a href="#" class="remove-overlay">Close</a></div><div class="email"><h2>Email to a friend</h2><form class="sendemail"><label>Email to</label><span class="required">*</span><input class="emailfield" type="text" size="37"/><label>Message</label><textarea rows="3" cols="35"></textarea><input type="button" value="Send" class="sendbutton btn btn-primary mt-7 mr-10" /><a href="#" class="remove-overlay">Close</a></form><p class="errormessage">Please enter correct email addresses.<p></div><div class="share"><h2>Share this video</h2><div class="sharebuttons"><p>Share via social media</p><ul class="oo-toolbar"><li class="googleshare"><a href="#"><span class="icon googleshare"></span></a></li><li class="twitter"><a href="#"><span class="icon twitter"></span></a></li><li class="linkedin"><a href="#"><span class="icon linkedin"></span></a></li><li class="facebook"><a href="#"><span class="icon facebook"></span></a></li></ul><label>Copy and paste this url to share</label><input type="text" size="37"></div><a href="#" class="cancelbtn remove-overlay">Close</a></div><div class="embed"><h2>Add to website or blog</h2><label>Embed code</label><textarea rows="5" cols="35"><script height="384px" width="570px" src="http://player.ooyala.com/iframe.js#pbid=9eba220ad98c47cda9fdf6ba82ce607a&ec='+c.embedCode+'"><\/script></textarea><a href="#" class="remove-overlay">Close</a></div>')}(function(){var d=document.createElement("script");d.type="text/javascript";d.async=true;d.src="//apis.google.com/js/plusone.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(d,e)})();b.parents(".innerWrapper").find(".sharebuttons input").val(burl);b.parents(".innerWrapper").find(".overlay > div > div").each(function(){if(!$(this).hasClass(a)){$(this).hide()}});b.parents(".innerWrapper").find(".overlay > div ."+a).show();b.parents(".innerWrapper").find(".remove-overlay").on("click",function(d){d.preventDefault();$(this).parents(".overlay").remove();enableHoverToggle(b);b.find(".player-toolbar ul li span").removeClass("active");b.parents(".innerWrapper").find(".oo_promo div.oo_start_button").show();b.removeAttr("style")});b.parents(".innerWrapper").find(".sendbutton").on("click",function(){validateForm(b,c.getTitle())})}function enableHoverToggle(a){a.parents(".ooyalaplayer").on({mouseover:function(){a.addClass("show");if(a.hasClass("show")){a.find(".player-toolbar > p").show()}},mouseout:function(){a.removeClass("show")}})}function disableHoverToggle(a){a.parents(".ooyalaplayer").off("mouseover mouseout");a.removeClass("show")}function validateForm(b,f){var d=true,e="",c=b.parents(".innerWrapper").find(".sendemail .emailfield"),a="";if(c.attr("type")!="button"){e=(c.val()==undefined)?"":c.val();if(!e.match(/^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/)){d=false;c.css("border-color","#fd5400")}else{d=true}}if(!d){b.parents(".innerWrapper").find(".overlay > div p").show()}else{b.parents(".innerWrapper").find(".overlay > div p").hide();c.css("border-color","#ccc");a=b.parents(".innerWrapper").find(".sendemail textarea").val()+"\n\n"+location.href;window.location.href="mailto:"+b.parents(".innerWrapper").find(".sendemail input").val()+"?subject="+f+" - (video)&body="+encodeURIComponent(a)}}function addPlayerControls(a,c){var b='<div class="volume-wrapper"><div class="oo_toolbar_item oo_button oo_volume oo_volume_high oo_customUI"><div class="volume_slider"><input type="range" min="0" max="100" value="100"></div></div></div>';$(b).insertBefore(a.parents(".innerWrapper").find(".oo_pause")[0]);a.parents(".ooyalaplayer").on("mouseenter",".volume-wrapper",function(){$(".volume_slider").show();$(".oo_controls .oo_pause,.oo_play").animate({left:80},500);$(".oo_full_controls .vod .oo_scrubber").animate({left:120},500);$(".volume-wrapper").css({width:100})}).on("mouseleave",".volume-wrapper",function(){$(".volume_slider").hide();$(".oo_controls .oo_pause, .oo_play").animate({left:30},500);$(".oo_full_controls .vod .oo_scrubber").animate({left:75},500);$(".volume-wrapper").css({width:25})}).find(".oo_volume input").on("change",function(){c.setVolume($(this).val()/100)})}function createCaptionsCollection(i,b){numCCLanguages=i.length;var a=[],m="xx",g="",c=$("#"+b.target);if(numCCLanguages>0){c.append('								<div class="ccLanguageModal" style="display:none;">										<p style="margin-bottom:10px;">Captions : 												<a href="javascript:void(0);" class="on-caption ooyala-caption" onClick="onCaptions("'+b.target+'");">On</a>												<a href="javascript:void(0);" class="off-caption disabled ooyala-caption" onClick="offCaptions("'+b.target+'");">Off</a>										</p>										<ul class="listLanguages" data-target="'+b.target+'"></ul>								</div>')}for(var j=0;j<numCCLanguages;j++){var e=$(i[j]);var h=e.attr("xml:lang"),f=mapLanguageCodes(h);languageList.push(h);c.find(".listLanguages").append('<li class="ccLanguage" data="'+h+'" >'+f+"</li>");var n=[];var l=e.find("p");for(var k=0;k<l.length;k++){g=h;if(g!=m){n.push({begin:getTime($(l[k]).attr("begin")),end:getTime($(l[k]).attr("end")),text:$(l[k]).text()})}}m=g;a.push(n)}c.on("click",".ccLanguage",function(d){changeCC.call(this,d,b)});return a}function findCurrentCC(d,a){for(var c=0;c<languageList.length;c++){var e=languageList[c].toLowerCase();var b=(a!=undefined)?(d+"-"+a):d;if(b.toLowerCase()=="zh-cn"){b="zh-hans"}else{if(b.toLowerCase()=="zh-tw"){b="zh-hant"}}if(e.toLowerCase()==b.toLowerCase()){return allCaptions[c]}}return[]}function processClosedCaption(b,e){var a=b.elementId,d="en",c="us";jQuery.ajax({url:b.currentItem.closed_captions[0].url,type:"GET",dataType:"xml"}).done(function(g){allCaptions=createCaptionsCollection($(g).find("div"),e);if(allCaptions.length>0){var f=$("#"+a);f.find(".oo_controls").prepend('<div class="captionsContainer"><div class="caption"></div></div>');addCCButton(e);e.captions=findCurrentCC(d,c);if(e.captions.length==0){e.captions=findCurrentCC(d)}if(f.find(".off-caption").hasClass("disabled")){onCaptions(a)}f.find(".oo_controls").addClass("has-cc")}e.MB.subscribe(OO.EVENTS.PLAYHEAD_TIME_CHANGED,"UITeam",function(h,j,i){onPlayheadTimeChanged(j,f,e)})}).fail(function(f){console.log("Did not get closed captions")})}function changeCC(c,d){var b=$(this).find("ul").data("target");if($(this).hasClass("ccLanguage-disabled")==false){var a=c.target.attributes.data.nodeValue;captions=findCurrentCC(a);$("#"+b).find(".ccLanguageModal").trigger("reveal:close").end().find(".videoLanguage01").hide().end().find(".cc_icon").attr("lanhidden","true")}d.MB.publish(OO.EVENTS.PLAY)}function offCaptions(a){$("#"+a).find(".off-caption").removeClass("disabled").end().find(".on-caption").addClass("disabled").end().find(".captionsContainer").hide().end().find(".listLanguages").hide().end().find(".ccLanguage").addClass("ccLanguage-disabled").end().find(".videoLanguage01").hide().end().find(".cc_icon").attr("lanhidden","true")}function onCaptions(a){$("#"+a).find(".on-caption").removeClass("disabled").end().find(".off-caption").addClass("disabled").end().find(".captionsContainer").show().end().find(".listLanguages").show().end().find(".ccLanguage").removeClass("ccLanguage-disabled").end().find(".cc_icon").attr("lanhidden","false")}function addCCButton(d){$("#"+d.target).find(".vod").append('<div class="cc_icon" class="oo_button oo_toolbar_item oo_cc" lanhidden="true"></div>').end().on("click",".cc_icon",function(){if($(this).attr("lanhidden")=="true"){onCaptions(d.target)}else{offCaptions(d.target)}});var c=$("#"+d.target),b=c.find(".vod");c.find(".oo_controls").attr("cc","cc");var a='<div class="videoLanguage01"></div>';$(b).append(a);c.find(".videoLanguage01").hide().append($(".ccLanguageModal")).end().find(".ccLanguageModal").show().end().find(".off-caption").removeClass("disabled").end().find(".on-caption").addClass("disabled").end().find(".captionsContainer").hide().end().find(".listLanguages").hide().end().find(".ccLanguage").addClass("ccLanguage-disabled").end().find(".videoLanguage01").hide().end().find(".cc_icon").attr("lanhidden","true")};
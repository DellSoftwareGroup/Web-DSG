addResize(function(){processComparison()},true);function processComparison(parentSelector){if(typeof parentSelector=="undefined"){parentSelector="body"}var elem=$(parentSelector).find(".comparison");if(elem.length){elem.each(function(){if(!$(this).is(":visible")){return true}var displayAmount=2,rows=$(this).find(".row"),columnsInFirstRow=$(rows.get(0)).find("> div"),total=columnsInFirstRow.length,cols=$(this).find('[class^="col-"]'),paginationElem=$(this).find(".comparison-pagination");reset();var width=columnsInFirstRow.outerWidth();if(pageType==3){displayAmount=$(this).data("display-lg")==undefined?4:$(this).data("display-lg")}else if(pageType==2){displayAmount=$(this).data("display-md")==undefined?4:$(this).data("display-md")}else if(pageType==1){displayAmount=$(this).data("display-sm")==undefined?3:$(this).data("display-sm")}paginationElem.find(".end").text(displayAmount);$(this).on("shown.bs.collapse",".collapse",function(){if(!$(this).data("comparison-processed")){$(this).find(".row").each(function(){var rowHeight=$(this).height();$(this).find("> div").css("height",rowHeight)});$(this).data("comparison-processed",true)}});if(total>displayAmount){cols.css("width",width);rows.css("width",width*total);elem.data("page",0).data("width",width).data("display",displayAmount);paginationElem.on("click",".prev",scroll).on("click",".next",scroll);if($.fn.touchSwipe){initSwipe()}else{$.getScript("/static/library/jQuery/jquery.touchSwipe.js").done(initSwipe)}}else{paginationElem.hide()}function reset(){cols.css("width","");rows.css({left:"",width:""});paginationElem.off("click","**").find(".next").removeClass("inactive").end().find(".prev").addClass("inactive").end().find(".start").text(1).end().find(".total").text(total);$(this).off("shown.bs.collapse","**");$(rows.get(0)).find("> div").css("height","");elem.find(".panel-body").find("> .row:even").each(function(){$(this).find("> div").html($(this).find("> div:eq(0)").html());$(this).find("> div:gt(0)").find("> div").css("visibility","hidden")})}function scroll(){updateDisplay(elem.data("page")+($(this).hasClass("prev")?-1:1))}function initSwipe(){rows.touchSwipe({swipeStatus:function(event,phase,direction,distance,duration,fingerCount){var dir="";if(!$(this).data("direction")){if($.inArray(direction,["left","right"])>-1){dir="horizontal"}else{dir="vertical"}$(this).data("direction",dir)}else{dir=$(this).data("direction")}var page=elem.data("page");if(dir=="horizontal"){if(direction=="left"){rows.css("left",-page*width-distance)}else if(direction=="right"){rows.css("left",-page*width+distance)}}else{if(direction=="up"){window.scrollTo(0,window.scrollY+distance)}else if(direction=="down"){window.scrollTo(0,window.scrollY-distance)}}if(phase=="end"){$(this).removeData("direction");if($.inArray(direction,["left","right"])>-1){var newPage=Math.ceil(parseInt(rows.css("left"))/width);if(newPage>=0){newPage=0}else{newPage=Math.abs(newPage)}updateDisplay(newPage)}}},threshold:10})}function updateDisplay(page){paginationElem.find("button").removeClass("inactive");if(page<=0){paginationElem.find(".prev").addClass("inactive");page=0}if(page+displayAmount>=total){paginationElem.find(".next").addClass("inactive");page=total-displayAmount}rows.animate({left:-page*width},500);elem.data("page",page);elem.find(".panel-body").find("> .row:even").each(function(){$(this).find("> div").find("> div").css("visibility","hidden").end().filter(":eq("+page+")").find("> div").css("visibility","visible")});paginationElem.find(".start").text(page+1).end().find(".end").text(page+displayAmount).end()}})}}